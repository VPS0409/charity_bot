#### `SCRIPTS.md`
````markdown
# Документация по скриптам управления

## Общие параметры
Все скрипты поддерживают логирование через `--log-level`:
```bash
python script.py --log-level DEBUG
Доступные уровни: DEBUG, INFO (по умолчанию), WARNING, ERROR

init_db.py
Инициализирует структуру базы данных.

Использование:

bash
python scripts/init_db.py
Создаваемые таблицы:

questions_groups - группы вопросов (разделы)

answers - ответы

standard_questions - стандартные вопросы

question_variants - варианты формулировок вопросов

user_questions - вопросы пользователей

pending_questions - неотвеченные вопросы

load_data.py
Загружает данные из CSV-файла в базу данных.

Формат CSV-файла
csv
group,standard_question,intent,question_variants,answers
"Раздел","Стандартный вопрос","intent_code","Вариант1;Вариант2","Текст ответа"
Использование:

bash
python scripts/load_data.py \
  --file base_qu_an/qu_ans_1.csv \
  --header
Параметры:

Параметр	Обязательный	Описание	По умолчанию
--file	Да	Путь к CSV-файлу	-
--header	Нет	Файл содержит строку заголовков	False
--log-level	Нет	Уровень логирования	INFO
add_question.py
Добавляет один вопрос в базу данных.

Использование:

bash
python scripts/add_question.py \
  --group "Условия в хосписе" \
  --intent "patient_activities" \
  --question "Что разрешается делать пациентам?" \
  --answer "Пациенты могут свободно перемещаться по территории..."
Параметры:

Параметр	Обязательный	Описание
--group	Да	Группа/раздел вопроса
--intent	Да	Служебный идентификатор вопроса
--question	Да	Текст вопроса
--answer	Да	Текст ответа
view_pending.py
Просмотр необработанных вопросов.

Использование:

bash
python scripts/view_pending.py
Формат вывода:

plaintext
ID  | Вопрос                              | Дата создания
----|-------------------------------------|----------------------
1   | Как получить направление?          | 2025-08-16 12:30:45
2   | Где найти отчетность?              | 2025-08-16 11:15:22


process_pending.py
Обработка неотвеченных вопросов.

Использование:

Для обработки конкретных вопросов:
bash
python scripts/process_pending.py --ids 5,12,19

Для обработки всех вопросов:
bash
python scripts/process_pending.py --all

Интерактивный режим:
bash
python scripts/process_pending.py

Параметры:

Параметр	Обязательный	Описание
--id	Да	ID неотвеченного вопроса
--answer	Да	Текст ответа
--intent	Да	Служебный идентификатор вопроса

Действия:
Добавляет ответ в таблицу answers
Создает стандартный вопрос в standard_questions
Добавляет вариант вопроса в question_variants
Помечает вопрос как обработанный в pending_questions

view_pending.py
# Только необработанные
python scripts/view_pending.py
# Все вопросы
python scripts/view_pending.py --all


Как узнать ID вопросов для обработки:

Запустите скрипт просмотра вопросов:
bash
python scripts/view_pending.py

или для показа всех вопросов (включая обработанные):
bash
python scripts/view_pending.py --all
Анализируйте вывод:
Скрипт покажет таблицу примерно такого формата:

text
====================================================================================================
ID      | Статус       | Дата создания         | Вопрос
----------------------------------------------------------------------------------------------------
5       | Ожидает      | 2023-05-20 10:30:25   | Как я могу сделать пожертвование?
12      | Ожидает      | 2023-05-21 11:45:12   | Какие документы нужны для волонтерства?
19      | Ожидает      | 2023-05-22 14:15:33   | Как стать попечителем фонда?
====================================================================================================
Определите ID нужных вопросов:
Первая колонка (ID) показывает уникальные идентификаторы вопросов

Статус "Ожидает" означает, что вопрос ещё не обработан

В последней колонке вы видите текст вопроса

Используйте ID в команде обработки:
Для обработки конкретных вопросов (например, с ID 5, 12 и 19):
bash
python scripts/process_pending.py --ids 5,12,19

Как работает процесс:
Пользователи задают вопросы через чат-бота на сайте
Вопросы сохраняются в БД в таблице pending_questions
Администратор просматривает вопросы с помощью view_pending.py
Администратор выбирает ID для обработки
Администратор запускает обработку с помощью process_pending.py

Альтернативные варианты обработки:
Обработать все неотвеченные вопросы сразу:
bash
python scripts/process_pending.py --all

Интерактивный режим (по одному вопросу):
bash
python scripts/process_pending.py

Скрипт сам покажет все необработанные вопросы по порядку
Для каждого вопроса предложит выбрать действие:

Добавить как новый вопрос-ответ
Привязать к существующему вопросу
Пропустить

Важные моменты:
ID берутся из первого столбца вывода view_pending.py
Можно обрабатывать как один вопрос, так и несколько через запятую
После обработки статус вопроса меняется на "Обработан"
Обработанные вопросы можно снова увидеть с флагом --all
Таким образом, вы сначала смотрите список вопросов с помощью view_pending.py, выбираете нужные ID из первого столбца, а затем передаёте их в process_pending.py для обработки.

Когда вы запускаете:
bash
python scripts/view_pending.py

Вы видите:

text
ID  | Статус    | Дата создания       | Вопрос
5   | Ожидает   | 2023-05-25 10:30:00 | Как стать волонтёром?

Для обработки вы используете ID 5 (из pending_questions):
bash
python scripts/process_pending.py --ids 5

Таким образом, хотя текст вопроса хранится в user_questions, в интерфейсе администратора вы работаете с ID из pending_questions, что позволяет эффективно управлять процессом обработки вопросов.

### Ключевые изменения в документации:

1. **Обновленные команды**:
   - Для `add_question.py` добавлен параметр `--group`
   - Для `load_data.py` указан новый формат CSV

2. **Новые возможности**:
   - Добавлено описание системы логирования вопросов
   - Указана поддержка Docker
   - Добавлена информация о конфигурации через `.env`

3. **Визуализация**:
   - Добавлена ER-диаграмма базы данных
   - Улучшено форматирование таблиц

4. **Структура проекта**:
   - Обновлен список файлов и папок
   - Указаны новые таблицы БД

5. **Практические примеры**:
   - Реальные команды для всех скриптов
   - Примеры запросов к API

6. **Ссылки на документацию**:
   - Добавлены ссылки на отдельные файлы документации
   - Указаны пути к файлам

Эта документация полностью соответствует текущей реализации проекта и дает четкое представление о его возможностях и использовании.
